<?xml version="1.0"?>
<mavlink>
    <version>1</version>
    <dialect>3</dialect>

    <enums>
        <enum name="SIMBA_ROCKET_STATE">
            <description>Rocket states</description>
            <entry value="1" name="SIMBA_ROCKET_STATE_INIT" />
            <entry value="2" name="SIMBA_ROCKET_STATE_DISARM" />
            <entry value="3" name="SIMBA_ROCKET_STATE_ARM" />
            <entry value="4" name="SIMBA_ROCKET_STATE_LAUNCH" />
            <entry value="5" name="FLIGHT" />

            <entry value="64" name="SIMBA_ROCKET_STATE_ABORT" />

            <!-- States below are only for ground segment information -->
            <entry value="6" name="APOGEE" />
            <entry value="7" name="FIRT_PARACHUTE_FALL" />
            <entry value="8" name="SECOND_PARACHUTE_ACTIVATION" />
            <entry value="9" name="SECOND_PARACHUTE_FALL" />
        </enum>

        <enum name="SIMBA_ACTUATOR_FLAGS" bitmask="true">
            <entry value="1" name="SIMBA_ROCKET_MAIN_VALVE" />
            <entry value="2" name="SIMBA_ROCKET_VENT_VALVE" />
            <entry value="4" name="SIMBA_ROCKET_DUMP_VALVE" />
            <entry value="8" name="SIMBA_ROCKET_RECOVERY_SERVO" />
            <entry value="16" name="SIMBA_ROCKET_RECOVERY_LINECUTTER" />
            <entry value="32" name="SIMBA_ROCKET_CAMERAS_ENABLED" />
        </enum>

        <enum name="SIMBA_GS_FLAGS" bitmask="true">
            <entry value="1" name="SIMBA_GS_DISARM" />
            <entry value="2" name="SIMBA_GS_ARM" />
            <entry value="4" name="SIMBA_GS_LAUNCH" />
            <entry value="8" name="SIMBA_GS_ABORT" />
            <entry value="16" name="SIMBA_GS_VENT_VALVE" />
            <entry value="32" name="SIMBA_GS_DUMP_VALVE" />
            <entry value="64" name="SIMBA_GS_CAMERAS" />
        </enum>
        
    </enums>

    <messages>
        <message id="69" name="SIMBA_TANK_TEMPERATURE">
            <description>Tank temperature sensor readings.</description>
            <!-- temp = float * 100 -->
            <field type="int16_t" name="upper_tank">Upper tank temperature</field>
            <field type="int16_t" name="middle_tank">Middle tank temperature</field>
            <field type="int16_t" name="lower_tank">Lower tank temperature</field>
        </message>

        <message id="70" name="SIMBA_TANK_PRESSURE">
            <description>Tank pressure sensor reading.</description>
            <!-- pressure = float * 100 -->
            <field type="uint16_t" name="pressure">Tank pressure</field>
        </message>

        <message id="71" name="SIMBA_IMU">
            <description>IMU data (scaled float â†’ int16_t)</description>
            <field type="uint64_t" name="timestamp">Timestamp [ms]</field>

            <!-- Accelerometer values (scaled)  acc_g / 0.0005f -->
            <field type="int16_t" name="acc_x">Acceleration X (scaled)</field>
            <field type="int16_t" name="acc_y">Acceleration Y (scaled)</field>
            <field type="int16_t" name="acc_z">Acceleration Z (scaled)</field>

            <!-- Gyroscope values (scaled)  gyro_dps / 0.1f -->
            <field type="int16_t" name="gyro_x">Gyroscope X (scaled)</field>
            <field type="int16_t" name="gyro_y">Gyroscope Y (scaled)</field>
            <field type="int16_t" name="gyro_z">Gyroscope Z (scaled)</field>

            <!-- Orientation (scaled)  roll / 0.01f -->
            <field type="int16_t" name="roll">Roll angle (scaled)</field>
            <field type="int16_t" name="pitch">Pitch angle (scaled)</field>
            <field type="int16_t" name="yaw">Yaw angle (scaled)</field>

            <!-- Barometric altitude NOT SCALED-->
            <field type="int32_t" name="altitude">Altitude (scaled) [cm]</field>
        </message>

        <message id="72" name="SIMBA_GPS">
            <description>GPS latitude, longitude and altitude.</description>
            <field type="int32_t" name="lat">Latitude (1E7 * degrees)</field>
            <field type="int32_t" name="lon">Longitude (1E7 * degrees)</field>
            <field type="int32_t" name="altitude">Altitude (scaled) [cm]</field>
        </message>

        <message id="73" name="SIMBA_ROCKET_HEARTBEAT">
            <description>Rocket heartbeat message sent during whole mission.</description>
            <field type="uint64_t" name="timestamp">Timestamp (system uptime in ms)</field>
            <field type="uint8_t" name="flight_computer_state" enum="SIMBA_ROCKET_STATE">Flight computer state</field>
            <field type="uint8_t" name="engine_computer_state" enum="SIMBA_ROCKET_STATE">Engine computer state</field>
            <field type="uint8_t" name="values" enum="SIMBA_ACTUATOR_FLAGS">Actuator bitmask</field>
        </message>

        <message id="74" name="SIMBA_GS_HEARTBEAT">
            <description>Ground station heartbeat.</description>
            <field type="uint64_t" name="timestamp">Timestamp (system uptime in ms)</field>
            <field type="uint8_t" name="values" enum="SIMBA_GS_FLAGS">GS buttons bitmask</field>
        </message>

        <message id="75" name="SIMBA_MAX_ALTITUDE">
            <description>Barometric maximum altitude</description>
            <field type="int32_t" name="altitude"> Altitude (scaled) [cm] </field>
        </message>
        <message id="76" name="SIMBA_COMPUTER_TEMPERATURE">
            <description> Rocket Computer Temperature in deg </description>
            <field type="int16_t" name="eb_temp">Mean Engine Computer temperature</field>
            <field type="int16_t" name="mb_temp">Mean Main Computer temperature</field>
        </message>

        <message id="147" name="SIMBA_ACTUATOR_CMD">
            <description>Direct actuator command (for testing; DO NOT USE IN PRODUCTION).</description>
            <field type="uint8_t" name="actuator_id">Actuator ID</field>
            <field type="uint8_t" name="value">New actuator value</field>
        </message>

    </messages>

</mavlink>